<html><head><title>Overview of trackObjs package</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" type="text/css" href="Rchm.css">
</head>
<body>

<table width="100%"><tr><td>trackObjs-package(trackObjs)</td><td align="right">R Documentation</td></tr></table><object type="application/x-oleobject" classid="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e">
<param name="keyword" value="R:   trackObjs-package">
<param name="keyword" value="R:   trackObjs">
<param name="keyword" value=" Overview of trackObjs package">
</object>


<h2>Overview of trackObjs package</h2>


<h3>Description</h3>

<p>
The trackObjs package sets up a link between R objects in memory and
files on disk so that objects are automatically resaved to files when
they are changed.  R objects in files are read in on demand and do not
consume memory prior to being referenced.  The trackObjs package also
tracks times when objects are created and modified, and caches some
basic characteristics of objects to allow for fast summaries of objects.
</p>
<p>
Each object is stored in a separate RData file using the standard
format as used by <code>save()</code>, so that objects can be manually
picked out of or added to the trackObjs database if needed.
</p>
<p>
Tracking works by replacing a tracked variable by an 'activeBinding',
which when accessed looks up information in an associated 'tracking
environment' and reads or writes the corresponding RData file and/or
gets or assigns the variable in the tracking environment.
</p>


<h3>Details</h3>

<p>
There are three main reasons to use the <code>trackObjs</code> package:
<ul>
<li>conveniently handle many moderately-large objects that would
collectively exhaust memory or be inconvenient to manage in
files by manually using <code>save()</code> and <code>load()</code>
<li>keep track of creation and modification times on objects
<li>get fast summaries of basic characteristics of objects - class,
size, dimension, etc.
</ul>

<p>
There is an option to control whether tracked objects are cached in
memory as well as being stored on disk.  By default, objects are
not cached.  To save time when working with collections of objects that
will all fit in memory, turn on
caching with
<code><a href="track.options.html">track.options</a>(cache=TRUE)</code>, or start
tracking with <code><a href="track.setup.html">track.start</a>(..., cache=TRUE)</code>.
</p>
<p>
Here is a brief example of tracking some variables in the global environment:
</p>
<pre>
&gt; library(trackObjs)
&gt; track.start("tmp1")
&gt; x &lt;- 123                  # Not yet tracked
&gt; track(x)                  # Variable 'x' is now tracked
&gt; track(y &lt;- matrix(1:6, ncol=2)) # 'y' is assigned &amp; tracked
&gt; z1 &lt;- list("a", "b", "c")
&gt; z2 &lt;- Sys.time()
&gt; track(list=c("z1", "z2")) # Track a bunch of variables
&gt; track.summary(size=F)     # See a summary of tracked vars
            class    mode extent length            modified TA TW
x         numeric numeric    [1]      1 2007-09-07 08:50:58  0  1
y          matrix numeric  [3x2]      6 2007-09-07 08:50:58  0  1
z1           list    list  [[3]]      3 2007-09-07 08:50:58  0  1
z2 POSIXt,POSIXct numeric    [1]      1 2007-09-07 08:50:58  0  1
&gt; # (TA="total accesses", TW="total writes")
&gt; ls(all=TRUE)
[1] "x"  "y"  "z1" "z2"
&gt; track.stop()              # Stop tracking
&gt; ls(all=TRUE)
character(0)
&gt;
&gt; # Restart using the tracking dir -- the variables reappear
&gt; track.start("tmp1") # Start using the tracking dir again
&gt; ls(all=TRUE)
[1] "x"  "y"  "z1" "z2"
&gt; track.summary(size=F)
            class    mode extent length            modified TA TW
x         numeric numeric    [1]      1 2007-09-07 08:50:58  0  1
y          matrix numeric  [3x2]      6 2007-09-07 08:50:58  0  1
z1           list    list  [[3]]      3 2007-09-07 08:50:58  0  1
z2 POSIXt,POSIXct numeric    [1]      1 2007-09-07 08:50:58  0  1
&gt; track.stop()
&gt;
&gt; # the files in the tracking directory:
&gt; list.files("tmp1", all=TRUE)
[1] "."                    ".."
[3] "filemap.txt"          ".trackingSummary.rda"
[5] "x.rda"                "y.rda"
[7] "z1.rda"               "z2.rda"
&gt;
</pre>
</p>
<p>
There are several points to note:
<ul>
<li>The global environment is the default environment for tracking
&ndash; it is possible to track variables in other environments, but that
environment must be supplied as an argument to the track functions.
<li>Vars must be explicitly <code>track()</code>ed - newly created objects
are not tracked.  (This is not a "feature", but there is currently no way of
automatically tracking newly created objects &ndash; this is on the
wishlist.)  Thus, it is possible
for variables in a tracked environment to either tracked or untracked.
<li>When tracking is stopped, all
tracked variables are saved on disk and will be no longer accessible
until tracking is started again.
<li>The objects are stored each in their own file in the 
tracking dir, in the
format used by <code>save()</code>/<code>load()</code> (RData files).
</ul>

<h3>List of basic functions and common calling patterns</h3>

<p>
Six functions cover the majority of common usage of the trackObjs package:
</p>

<ul>
<li><code><a href="track.setup.html">track.start</a>(dir=...)</code>: start tracking
the global environment, with files saved in <code>dir</code>
<li><code><a href="track.setup.html">track.stop</a>()</code>: stop tracking
(any unsaved tracked variables are saved to disk and all tracked variables
become unavailable until tracking starts again)
<li><code><a href="track.manage.html">track</a>(x)</code>: start tracking <code>x</code> -
<code>x</code> in the global environment is replaced by an active binding
and <code>x</code> is saved in its corresponding file in the tracking
directory and, if caching is on, in the tracking environment
<li><code><a href="track.manage.html">track</a>(x &lt;- value)</code>: start tracking <code>x</code>
<li><code><a href="track.manage.html">track</a>(list=c('x', 'y'))</code>: start tracking
specified variables
<li><code><a href="track.manage.html">track</a>(all=TRUE)</code>: start tracking all
untracked variables in the global environment
<li><code><a href="track.manage.html">untrack</a>(x)</code>: stop tracking variable <code>x</code> -
the R object <code>x</code> is put back as an ordinary object in the global environment
<li><code><a href="track.manage.html">untrack</a>(all=TRUE)</code>: stop tracking all
variables in the global environment (but tracking is still set up)
<li><code><a href="track.manage.html">untrack</a>(list=...)</code>: stop tracking specified variables
<li><code><a href="track.summary.html">track.summary</a>()</code>: print a summary of
the basic characteristics of tracked variables: name, class, extent,
and creation, modification and access times.
<li><code><a href="track.manage.html">track.remove</a>(x)</code>: completely remove all
traces of <code>x</code> from the global environment, tracking environment
and tracking directory.   Note that if variable <code>x</code> in the global
environment is tracked,
<code>remove(x)</code> will make <code>x</code> an "orphaned" variable:
<code>remove(x)</code> will just remove the active binding from the global
environment, and leave <code>x</code> in the tracked environment and on
file, and <code>x</code> will reappear after restarting tracking.
</ul>

<h3>Complete list of functions and common calling patterns</h3>

<p>
The <code>trackObjs</code> package provides many additional functions for
controlling how tracking is performed (e.g., whether or not tracked variables
are cached in memory), examining the state of tracking (show which
variables are tracked, untracked, orphaned, masked, etc.) and repairing
tracking environments and databases that have become inconsistent or incomplete
(this may result from resource limitiations, e.g., being unable to
write a save file due to lack of disk space, or from manual tinkering,
e.g., dropping a new save file into a tracking directory.)
</p>
<p>
The functions that can be used to set up and take down tracking are:
<ul>
<li><code><a href="track.setup.html">track.start</a>(dir=...)</code>: start tracking,
using the supplied directory
<li><code><a href="track.setup.html">track.stop</a>()</code>: stop tracking
(any unsaved tracked variables are saved to disk and all tracked variables
become unavailable until tracking starts again)
<li><code><a href="track.status.html">track.dir</a>()</code>: return the path of the
tracking directory
</ul>

<p>
Functions for tracking and stopping tracking variables:
<ul>
<li><code><a href="track.manage.html">track</a>(x)</code>
<code><a href="track.manage.html">track</a>(var &lt;- value)</code>
<code><a href="track.manage.html">track</a>(list=...)</code>
<code><a href="track.manage.html">track</a>(all=TRUE)</code>: start tracking variable(s)
<li><code><a href="track.manage.html">track.load</a>(file=...): load some objects from
    a RData file into the tracked environment</code>
<li><code><a href="track.manage.html">untrack</a>(x, keep.in.db=FALSE)</code>
<code><a href="track.manage.html">untrack</a>(list=...)</code>
<code><a href="track.manage.html">untrack</a>(all=TRUE)</code>: stop tracking variable(s) -
value is left in place, and optionally, it is also left in the the database
</ul>

<p>
Functions for getting status of tracking and summaries of variables:
<ul>  <li><code><a href="track.summary.html">track.summary</a>()</code>: return a data
frame containing a summary of the basic characteristics of tracked
variables: name, class, extent, and creation, modification and access times.
<li><code><a href="track.status.html">track.status</a>()</code>: return a data frame
containing information about the tracking status of variables: whether
they are saved to disk or not, etc.
<li><code><a href="track.setup.html">env.is.tracked</a>()</code>: tell whether an
environment is currently tracked
</ul>

<p>
The remaining functions allow the user to more closely manage variable
tracking, but are less likely to be of use to new users.
</p>
<p>
Functions for getting status of tracking and summaries of variables:
<ul>
<li><code><a href="track.status.html">tracked</a>()</code>: return the names of tracked variables
<li><code><a href="track.status.html">untracked</a>()</code>: return the names of
untracked variables
<li><code><a href="track.status.html">untrackable</a>()</code>:  return the names of
variables that cannot be tracked
<li><code><a href="track.status.html">track.unsaved</a>()</code>: return the names of
variables whose copy on file is out-of-date
<li><code><a href="track.status.html">track.orphaned</a>()</code>: return the
names of once-tracked variables that have lost their active binding
(should not happen)
<li><code><a href="track.status.html">track.masked</a>()</code>: return the names of
once-tracked variables whose active binding has been overwritten by an
ordinary variable (should not happen)
</ul>

<p>
Functions for managing tracking and tracked variables:
<ul>
<li><code><a href="track.options.html">track.options</a>()</code>: examine and set
options to control tracking
<li><code><a href="track.manage.html">track.remove</a>()</code>: completely remove all
traces of a tracked variable
<li><code><a href="track.manage.html">track.save</a>()</code>: write unsaved variables to disk
<li><code><a href="track.manage.html">track.flush</a>()</code>: write unsaved variables to disk, and remove from memory
<li><code><a href="track.manage.html">track.forget</a>()</code>: delete cached
versions without saving to file (file version will be retrieved next
time the variable is accessed)
<li><code><a href="track.setup.html">track.restart</a>()</code>: reload variable
values from disk (can forget all cached vars, remove no-longer existing tracked vars)
<li><code><a href="track.manage.html">track.load</a>()</code>: load variables from a
saved RData file into the tracking session
</ul>

<p>
Functions for recovering from errors:
<ul>
<li><code><a href="track.rebuild.html">track.rebuild</a>()</code>: rebuild tracking
information from objects in memory or on disk
<li><code><a href="track.manage.html">track.flush</a></code>: write unsaved variables to disk, and remove from memory
</ul>

<p>
Design and internals of tracking:
<ul>
<li><code><a href="track.design.html">track.design</a></code>
</ul>

<h3>Author(s)</h3>

<p>
Tony Plate &lt;tplate@acm.org&gt;
</p>


<h3>References</h3>

<p>
Roger D. Peng. Interacting with data using the filehash package. R
News, 6(4):19-24, October
2006. <a href="http://cran.r-project.org/doc/Rnews">http://cran.r-project.org/doc/Rnews</a> and
<a href="http://sandybox.typepad.com/software">http://sandybox.typepad.com/software</a>
</p>
<p>
David E. Brahm. Delayed data packages. R News, 2(3):11-12, December
2002.  <a href="http://cran.r-project.org/doc/Rnews">http://cran.r-project.org/doc/Rnews</a>
</p>


<h3>See Also</h3>

<p>
<a href="track.design.html">Design</a> of the <code>trackObjs</code> package.
</p>
<p>
Potential <a href="track.future.html">future features</a> of the <code>trackObjs</code> package.
</p>
<p>
Documentation for <code><a onclick="findlink('base', 'save.html')" style="text-decoration: underline; color: blue; cursor: hand">save</a></code> and <code><a onclick="findlink('base', 'load.html')" style="text-decoration: underline; color: blue; cursor: hand">load</a></code> (in 'base' package).
</p>
<p>
Documentation for <code><a onclick="findlink('base', 'bindenv.html')" style="text-decoration: underline; color: blue; cursor: hand">makeActiveBinding</a></code> and related
functions (in 'base' package).
</p>
<p>
Inspriation from the packages <code><a onclick="findlink('g.data', 'g.data-package.html')" style="text-decoration: underline; color: blue; cursor: hand">g.data</a></code> and
<code><a onclick="findlink('filehash', 'dbLoad.html')" style="text-decoration: underline; color: blue; cursor: hand">filehash</a></code>.
</p>

<script Language="JScript">
function findlink(pkg, fn) {
var Y, link;
Y = location.href.lastIndexOf("\\") + 1;
link = location.href.substring(0, Y);
link = link + "../../" + pkg + "/chtml/" + pkg + ".chm::/" + fn;
location.href = link;
}
</script>


<hr><div align="center">[Package <em>trackObjs</em> version 0.8-5 <a href="00Index.html">Index</a>]</div>

</body></html>
