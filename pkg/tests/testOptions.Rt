

> library(trackObjs)
> # Set the locale used by order() so that track.status() & track.summary() put
> # rows in the same order on different systems (so that the test output matches).
> invisible(Sys.setlocale("LC_COLLATE", "C"))
> options(width=120)
> options(error=function() NULL)
> unlink("tmp6", recursive=TRUE)
> track.start("tmp6")
> x <- 33
> X <- array(1:24, dim=2:4)
> track.status()
   Status InMem FileBase FileExists Saved
X tracked FALSE       _1       TRUE  TRUE
x tracked FALSE        x       TRUE  TRUE
> track.options(cache=TRUE, writeToDisk=FALSE) # change for just this session
> # different ways of retrieving option values
> track.options(c("cache", "writeToDisk"))
$cache
[1] TRUE

$writeToDisk
[1] FALSE

> track.options("cache", "writeToDisk")
$cache
[1] TRUE

$writeToDisk
[1] FALSE

> track.options("cache")
$cache
[1] TRUE

> track.options()
$cache
[1] TRUE

$writeToDisk
[1] FALSE

$maintainSummary
[1] TRUE

$alwaysSaveSummary
[1] FALSE

$useDisk
[1] TRUE

$recordAccesses
[1] TRUE

$summaryTimes
[1] 1

$summaryAccess
[1] 1

$RDataSuffix
[1] "rda"

$debug
[1] 0

$autoTrackExclude
[1] "^\\.track"  "^.required"

$autoTrackFullSyncWait
[1] 300

$autoTrackLastFullSync
[1] -1

$clobberVars
[1] ".Random.seed"

> # see the effect of the changed options on the status of X (not saved to disk)
> track.status()
   Status InMem FileBase FileExists Saved
X tracked FALSE       _1       TRUE  TRUE
x tracked FALSE        x       TRUE  TRUE
> X[1,1,1] <- 0
> track.status()
   Status InMem FileBase FileExists Saved
X tracked  TRUE       _1       TRUE FALSE
x tracked FALSE        x       TRUE  TRUE
> track.flush()
[1] "X" "x"
> track.status()
   Status InMem FileBase FileExists Saved
X tracked FALSE       _1       TRUE  TRUE
x tracked FALSE        x       TRUE  TRUE
> track.stop()
> track.start("tmp6")
> # note that options previously changed are back at defaults (because default
> # to track.options() is save=FALSE
> track.options(c("cache", "writeToDisk"))
$cache
[1] FALSE

$writeToDisk
[1] TRUE

> track.options(cache=TRUE, writeToDisk=FALSE, save=TRUE) # change the options on disk
> track.options(c("cache", "writeToDisk"))
$cache
[1] TRUE

$writeToDisk
[1] FALSE

> track.stop()
> track.start("tmp6")
> # now options previously changed are remembered (because track.options(..., save=TRUE) was used)
> track.options(c("cache", "writeToDisk"))
$cache
[1] TRUE

$writeToDisk
[1] FALSE

> track.stop()
> 
> 
